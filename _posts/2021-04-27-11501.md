---
title : "Beakjoon 11501 주식"
categories: 
    - Algorithm
tag : 
    - 백준
    - Greedy
toc : true
use_math : false
---

### [Greedy] 11501번 주식



#### 문제

n일의 주가가 주어진다. 매일 아래 세 가지 중 하나의 행동을 한다.

1. 주식 하나를 산다.
2. 원하는 만큼 가지고 있는 주식을 판다.
3. 아무것도 안한다.

날 별로 주식의 가격이 주어졌을 때, 최대 이익이 얼마나 나는지 계산하시오.

입력은 아래와 같습니다. 

- t : 테스트 케이스 수(1 ≤ n ≤ 1,000)
- n : 주가가 주어지는 날의 수(2 ≤ n ≤ 1,000,000)
- arr[n] : 날 별 주가

```
3
3
10 7 6
3
3 5 9
5
1 1 3 1 2
```
------




#### 풀이

문제에 주어진 예를 보면 주어진 날 수가 3일이고 날 별로 주가가 10, 7, 6일 때, 주가는 계속 감소하므로 아무것도 안하기 때문에 최대 이익은 0이 된다. 만약 날 별로 주가가 3, 5, 9일 때는 마지막 날까지 주가가 계속 증가하므로 처음 두 날에 주식을 사고, 마지막 날에 모두 팔면 최대 이익이 10이 된다. 이처럼 주가가 최대인 날의 전 날까지는 주식을 사고, 최대인 날에 주식을 팔면 최대 이익을 얻을 수 있다.

처음엔 주가가 가장 높은 날이 나올 때까지 max 주가를 저장해두고 다음 날의 주가가 max보다 작아지는 날 max 주가를 가진 날에 전부 팔아버리는 방식으로 구하기 위해 앞쪽에서부터 최댓값을 찾고, 최댓값이 나타날 때까지 사는 주가를 별도의 배열에 저장해두면서 max 값이 나오는 날 샀던 주식들을 순회하며 이익을 계산했다.

하지만 이렇게 하면 최댓값을 찾을 때까지 샀던 날의 주가를 저장하고 있어야 하므로 관리하기가 번거로웠다. 다른 사람의 풀이를 찾아본 결과 마지막 날부터 계산하면 더 쉽게 풀 수 있다는걸 알 수 있었다.

뒤에서부터 확인하면 앞으로 넘어갈수록 현재 값보다 크면 사지 않고 넘어가고, 현재 값보다 작으면 max값을 가진 날에서 빼주면 된다. 그림으로 설명하면 아래와 같다.

index = 4일 때 max 값은 현재 값으로 설정한다. 

max = 2, 이익 = 0

|       |      |      |      |      | *max |
| ----- | ---- | ---- | ---- | ---- | ---- |
| index | 0    | 1    | 2    | 3    | 4    |
| 주가  | 1    | 1    | 3    | 1    | 2    |

index = 3일 때 max 값보다 작으므로 주식을 사고 max에 팔면 이익을 볼 수 있다. 

max = 2, 이익 = (2-1) = 1

|       |      |      |      | *    | max  |
| ----- | ---- | ---- | ---- | ---- | ---- |
| index | 0    | 1    | 2    | 3    | 4    |
| 주가  | 1    | 1    | 3    | 1    | 2    |

index = 2일 때 이전 max 값보다 크므로 max값을 변경한다. 

max = 3, 이익 = (2-1) = 1

|       |      |      | *max |      |      |
| ----- | ---- | ---- | ---- | ---- | ---- |
| index | 0    | 1    | 2    | 3    | 4    |
| 주가  | 1    | 1    | 3    | 1    | 2    |

index = 1일 때 이전 max 값보다 작으므로 주식을 사고 max에 팔면 이익을 볼 수 있다. 

max = 3, 이익 = (2-1) + (3-1) = 3

|       |      | *    | max  |      |      |
| ----- | ---- | ---- | ---- | ---- | ---- |
| index | 0    | 1    | 2    | 3    | 4    |
| 주가  | 1    | 1    | 3    | 1    | 2    |

index = 0일 때 이전 max 값보다 작으므로 주식을 사고 max에 팔면 이익을 볼 수 있다. 

max = 3, 이익 = (2-1) + (3-1)  + (3-1) = 5

|       | *    |      | max  |      |      |
| ----- | ---- | ---- | ---- | ---- | ---- |
| index | 0    | 1    | 2    | 3    | 4    |
| 주가  | 1    | 1    | 3    | 1    | 2    |



이러한 과정을 코드로 구현하면 아래와 같다.

```java
long answer = 0;
int maxIndex = n-1;
// 뒤에서부터 확인 
for (int i=n-2; i>-1; i--) {
  if (arr[i] > arr[maxIndex]) {
    // 앞쪽이 더 크면 살 필요가 없으므로 최대값 이동 
    maxIndex = i;
  } else {
    // 최대값보다 작은 값이 앞에 있다면 사고 파는 주식이므로 이익에 추가 
    answer += (arr[maxIndex] - arr[i]);
  }
}
```
------



[전체 코드]
[Backjoon_greedy_11501](https://github.com/yuntnwls/codingtest/blob/2b22d6ffff7e67d67b98618a0ada58e5e8345c34/src/com/backjoon/greedy/t11501/Main.java)

[참고 자료]
[https://kangwlgns.tistory.com/18](https://kangwlgns.tistory.com/18)

